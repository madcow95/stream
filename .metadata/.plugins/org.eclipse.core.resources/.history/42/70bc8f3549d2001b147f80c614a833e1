<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="ctx" value="${pageContext.request.contextPath == '/' ? '' : pageContext.request.contextPath }" scope="application"></c:set>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="_csrf" content="${_csrf.token}">
<meta name="_csrf_header" content="${_csrf.headerName}">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript">
	$(document).ready(function () {
		var shoulder = $("input[name='shoulder']");
		var back = $("input[name='back']");
		var token = $("meta[name='_csrf']").attr("content");
		var header = $("meta[name='_csrf_header']").attr("content");
		$("button[name='sBtn']").on("click", function () {
			$.ajax({
				url : "${ctx}/shop",
				data : "data="+shoulder.val() + "운동",
				beforeSend : function(xhr){
					xhr.setRequestHeader(header, token);
				},
				type : "post",
				success : function (result) {
					console.log(result.image);
					console.log(result.title);
					console.log(result.lprice);
				}
			});
		});
		$("button[name='bBtn']").on("click", function () {
			$.ajax({
				url : "${ctx}/shop",
				data : JSON.stringify(back.val()),
				contentType : "application/json; charset=UTF-8",
				beforeSend : function(xhr){
					xhr.setRequestHeader(header, token);
				},
				type : "post",
				success : function (result) {
					console.log(result);
				}
			});
		});
	});
</script>
</head>
<body>
<%@ include file="header.jsp" %>
<button name="sBtn">어깨</button>
<button name="bBtn">등</button>
<input type="hidden" value="어깨" name="shoulder">
<input type="hidden" value="등" name="back">
</body>
</html>