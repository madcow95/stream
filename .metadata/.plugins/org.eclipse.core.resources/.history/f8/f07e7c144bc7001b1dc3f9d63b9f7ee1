<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.moviestream.movie.board.mapper.ReplyMapper">
	<select id="getListWithPaging" resultType="com.springstudy.shop.board.domain.ReplyDTO">
	<![CDATA[
		SELECT	 rno,
				 articleno,
				 replytext,
				 id,
				 regdate,
				 updatedate
		FROM	(SELECT /*+ INDEX(tbl_reply IDX_tbl_reply_PK) */
						rownum rn,
						rno,
						articleno,
						replytext,
						id,
						regdate,
						updatedate
				  FROM	tbl_reply
				  WHERE	bno = #{bno}
				  AND rno > 0
				  AND rownum <= #{cri.pageNum} * #{cri.amount})
		WHERE	  rn > (#{cri.pageNum} - 1) * #{cri.amount}
	]]>
	</select>
	
	<select id="getCountByBno" resultType="int">
		<![CDATA[
			SELECT COUNT(rno)
			FROM tbl_reply
			WHERE bno=#{bno}
			AND rno > 0
		]]>
	</select>
</mapper>