<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="_csrf" content="${_csrf.token}">
<meta name="_csrf_header" content="${_csrf.headerName}">
<link href="${ctx}/resources/css/find.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript" src="${ctx}/resources/js/find.js"></script>
<title>Insert title here</title>
</head>
<script type="text/javascript">
	$(document).ready(function () {
		$("button[name='codeChkBtn']").on("click", function () {
			var codes = {
				insertCode : $("input[name=insertCode]").val(),
				encodedCode : $("input[name=rCode]").val()
			}
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");		
			$.ajax({
				url : "/member/codeChk",
				type : "post",
				data : codes,
				contentType : "application/json; charset=UTF-8",
				beforeSend : function(xhr){
					xhr.setRequestHeader(header, token);
				},
				success : function (result) {
					console.log(result);
				}
			}); // ajax end
		});
	});
</script>
<body>
<%@ include file="../header.jsp" %>
  <div class="container">
    <div class="row">
      <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">인증번호 입력</h5>
            <form class="form-signin" method="post" name="frm" action="${ctx}/member/codeChk">
              <div class="form-label-group">
                <input type="text" class="form-control" placeholder="인증번호입력" id="code" name="insertCode">
                <label></label>
              </div>
              <hr class="my-4">
			  <input type="hidden" value="${code}" id="rCode" name="rCode">
              <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}">
              <button class="btn btn-lg btn-google btn-block text-uppercase" id="codeChk" style="border: 2px solid #000000;" type="button" name="codeChkBtn">인증번호 확인</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>