<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="ctx" value="${pageContext.request.contextPath == '/' ? '' : pageContext.request.contextPath }" scope="application"></c:set>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style type="text/css">
	
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script type="text/javascript">
 $(document).ready(function () {
	 $("button[name='testBtn']").on("click", function () {
		var text = "상체";
		var key = "AIzaSyD6Gzk_-YieLA_oo0v_m1WyyM63QWoBUbo";
		var keyword = title + " 운동법";
		$.ajax({
			type : "GET",
			url : "https://www.googleapis.com/youtube/v3/search?key="+key,
			data : {
				part : 'snippet',
				order : 'viewCount',
				q : keyword,
				maxResults:1,
			},
			success : function (result) {
				console.log(result.items[0].id.videoId);
				var testClass = $(".testClass");
				var appendtext = "";
				appendtext += "<div id='player'></div>";
				test.append(appendtext);
				alert("변경성공");
			}
		});
	});
	 
	/* function test(title) {
		var key = "AIzaSyD6Gzk_-YieLA_oo0v_m1WyyM63QWoBUbo";
		var keyword = title + " 운동법";
		$.ajax({
			type : "GET",
			url : "https://www.googleapis.com/youtube/v3/search?key="+key,
			data : {
				part : 'snippet',
				order : 'viewCount',
				q : keyword,
				maxResults:1,
			},
			success : function (result) {
				console.log(result.items[0].id.videoId);
				onYouTubeIframeAPIReady(result.items[0].id.videoId);
				var testClass = $(".testClass");
				var appendtext = "";
				appendtext += "<div id='player'></div>";
				test.append(appendtext);
			}
		}); 
	} */
});
 
	
	function onYouTubeIframeAPIReady(url) {
		player = new YT.Player('player', {
			videoId : url,
			width : "600",
			height : "450",
			playerVars : {
				'modestbranding' : 1,
				'autoplay' : 1,
				'controls' : 1,
				'showinfo' : 0,
				'rel' : 0,
				'loop' : 0,
				'playlist' : url
			},
			events: {
				'onReady' : onPlayerReady,
				'onStateChange' : onPlayerStateChange
			}
		});
	}
	
	function onPlayerReady(event) {
		event.target.playVideo();
	}
	
	function onPlayerStateChange() {
		if(player.getPlayerState() == 1) console.log("재생중");
		else if(player.getPlayerState() == 2) console.log("일시중지");
	}
</script>
<title>Test Page</title>
</head>
<body>
<%@ include file="header.jsp" %>
<h1>선택</h1>
<button name="testBtn">상체</button>
<button>하체</button>
<div class="testClass"></div>
</body>
</html>